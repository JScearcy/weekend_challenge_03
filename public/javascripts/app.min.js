$(document).ready(function(){function a(){i=setInterval(b,5e3)}function b(){$("#Rand").trigger("click")}function c(){return $.ajax({method:"GET",url:"/shoutouts",dataType:"json"}).done(function(a){g=a})}function d(a){$newShoutDiv=$("<div>").attr({"class":"studentShoutOut",id:a.id}),$newShoutUl=$("<ul>"),$newNameLi=$("<li>").attr({"class":"studentName",id:"name"+a.id+a.id}),$newShoutLi=$("<li>").attr({"class":"shoutOut",id:"Shout"+a.id+a.id}),$newNameLi.text(a.name),$newShoutLi.text(a.shoutout),$newShoutDiv.append($newNameLi).append($newShoutLi),$shoutOutDiv.append($newShoutDiv.hide())}function e(a){a.forEach(function(a){d(a)}),$("#"+f).show({effect:"fade",duration:400})}$shoutOutDiv=$(".students"),$infoContainer=$(".infoContainer"),$all=$("body");var f=1,g=[],h=[];$h1=$("#head");var i;$.when(c()).done(function(){$("#loading").remove(),e(g);var b=$("<button>").attr({"class":"nextBut",id:"Next"}).text("Next").append($("<span>").attr({"class":"glyphicon glyphicon-chevron-right"})),c=$("<button>").attr({"class":"prevBut",id:"Prev"}).text("Prev").prepend($("<span>").attr({"class":"glyphicon glyphicon-chevron-left"})),d=$("<button>").attr({"class":"randBut",id:"Rand"}).text("Random");$infoContainer.append(c).append(d).append(b),a(),$infoContainer.on("click","#Next",function(){$("#"+f).hide({effect:"fade"}),f++,f==g.length-1&&(f=1),$("#"+f).delay(400).show({effect:"fade",duration:400})}),$infoContainer.on("click","#Prev",function(){$("#"+f).hide({effect:"fade"}),f--,0==f&&(f=g.length),$("#"+f).delay(400).show({effect:"fade",duration:400})}),$infoContainer.on("click","#Rand",function(){var a=Math.floor(Math.random()*(g.length-1)+1);$("#"+f).hide({effect:"fade"}),f=a,$("#"+f).delay(400).show({effect:"fade",duration:400})}),$("#Add").on("click",function(){clearInterval(i),$shoutOutDiv.html("<p>Loading Info...</p>"),$.ajax({type:"GET",url:"/views/add.html"}).done(function(a){$shoutOutDiv.html(a)})}),$infoContainer.on("click","#insertShout",function(){$name=$("#Name"),$shoutAdd=$("#ShoutOut"),$name.val()&&$shoutAdd.val()&&(h.push({name:$name.val(),shoutout:$shoutAdd.val(),id:g.length+1}),f=g.length+1),$shoutOutDiv.empty(),e(g),e(h),"AddData"!=$("#AddData").attr("id")&&($("#Add").after('<button id="AddData" class="addData" name="AddData">Add Permanently</button>'),$("#AddData").after('<button id="CancelAdd" name="CancelAdd">Cancel</button>'),$("#Add").hide()),$("#"+f).show({effect:"fade",duration:400}),a()}),$all.on("click","#CancelInsert",function(){clearInterval(i),$shoutOutDiv.empty(),e(g),e(h),a()}),$all.on("click","#CancelAdd",function(){f=1,$("#AddData").remove(),$("#CancelAdd").remove(),$("#Add").show(),h=[],clearInterval(i),$shoutOutDiv.empty(),e(g),a()}),$all.on("click","#AddData",function(){clearInterval(i),$shoutOutDiv.html("Updating.."),sendShouts={},h.forEach(function(a,b){sendShouts[b]=a}),$.ajax({method:"PUT",url:"/shoutouts",data:sendShouts}).done(function(b){f=1,g=b,$shoutOutDiv.empty(),e(b),$("#AddData").remove(),$("#CancelAdd").remove(),$("#Add").show(),h=[],a()}).fail(function(){console.log("Failed!")})})})});