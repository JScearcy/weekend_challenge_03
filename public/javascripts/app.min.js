$(document).ready(function(){function a(){j=setInterval(b,5e3)}function b(){$("#Rand").trigger("click")}function c(){clearInterval(j),a()}function d(){return $.ajax({method:"GET",url:"/shoutouts",dataType:"json"}).done(function(a){h=a})}function e(a){$newShoutDiv=$("<div>").attr({"class":"studentShoutOut",id:a.id}),$newShoutUl=$("<ul>"),$newNameLi=$("<li>").attr({"class":"studentName",id:"name"+a.id+a.id}),$newShoutLi=$("<li>").attr({"class":"shoutOut",id:"Shout"+a.id+a.id}),$newNameLi.text(a.name),$newShoutLi.text(a.shoutout),$newShoutDiv.append($newNameLi).append($newShoutLi),$shoutOutDiv.append($newShoutDiv.hide())}function f(a){a.forEach(function(a){e(a)}),$("#"+g).show({effect:"fade",duration:400})}$shoutOutDiv=$(".students"),$infoContainer=$(".infoContainer"),$all=$("body");var g=1,h=[],i=[];$h1=$("#head");var j;$.when(d()).done(function(){$("#loading").remove(),f(h);var b=$("<button>").attr({"class":"nextBut",id:"Next"}).text("Next").append($("<span>").attr({"class":"glyphicon glyphicon-chevron-right"})),d=$("<button>").attr({"class":"prevBut",id:"Prev"}).text("Prev").prepend($("<span>").attr({"class":"glyphicon glyphicon-chevron-left"})),e=$("<button>").attr({"class":"randBut",id:"Rand"}).text("Random");$infoContainer.append(d).append(e).append(b),a(),$infoContainer.on("click","#Next",function(){$("#"+g).hide({effect:"fade"}),g++,g==h.length-1&&(g=1),$("#"+g).delay(400).show({effect:"fade",duration:400}),c()}),$infoContainer.on("click","#Prev",function(){$("#"+g).hide({effect:"fade"}),g--,0==g&&(g=h.length),$("#"+g).delay(400).show({effect:"fade",duration:400}),c()}),$infoContainer.on("click","#Rand",function(){var a=Math.floor(Math.random()*(h.length-1)+1);$("#"+g).hide({effect:"fade"}),g=a,$("#"+g).delay(400).show({effect:"fade",duration:400}),c()}),$("#Add").on("click",function(){clearInterval(j),$shoutOutDiv.html("<p>Loading Info...</p>"),$.ajax({type:"GET",url:"/views/add.html"}).done(function(a){$shoutOutDiv.html(a)})}),$infoContainer.on("click","#insertShout",function(){$name=$("#Name"),$shoutAdd=$("#ShoutOut"),$name.val()&&$shoutAdd.val()&&(i.push({name:$name.val(),shoutout:$shoutAdd.val(),id:h.length+1}),g=h.length+1),$shoutOutDiv.empty(),f(h),f(i),"AddData"!=$("#AddData").attr("id")&&($("#Add").after('<button id="AddData" class="addData" name="AddData">Add Permanently</button>'),$("#AddData").after('<button id="CancelAdd" name="CancelAdd">Cancel</button>'),$("#Add").hide()),$("#"+g).show({effect:"fade",duration:400}),a()}),$all.on("click","#CancelInsert",function(){clearInterval(j),$shoutOutDiv.empty(),f(h),f(i),a()}),$all.on("click","#CancelAdd",function(){g=1,$("#AddData").remove(),$("#CancelAdd").remove(),$("#Add").show(),i=[],clearInterval(j),$shoutOutDiv.empty(),f(h),a()}),$all.on("click","#AddData",function(){clearInterval(j),$shoutOutDiv.html("Updating.."),sendShouts={},i.forEach(function(a,b){sendShouts[b]=a}),$.ajax({method:"PUT",url:"/shoutouts",data:sendShouts}).done(function(b){g=1,h=b,$shoutOutDiv.empty(),f(b),$("#AddData").remove(),$("#CancelAdd").remove(),$("#Add").show(),i=[],a()}).fail(function(){console.log("Failed!")})})})});