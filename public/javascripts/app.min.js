$(document).ready(function(){function a(){return $.ajax({method:"GET",url:"/shoutouts",dataType:"json"}).done(function(a){e=a})}function b(a){$newShoutDiv=$("<div>").attr({"class":"studentShoutOut",id:a.id}),$newShoutUl=$("<ul>"),$newNameLi=$("<li>").attr({"class":"studentName",id:"name"+a.id+a.id}),$newShoutLi=$("<li>").attr({"class":"shoutOut",id:"Shout"+a.id+a.id}),$newNameLi.text(a.name),$newShoutLi.text(a.shoutout),$newShoutDiv.append($newNameLi).append($newShoutLi),$shoutOutDiv.append($newShoutDiv.hide())}function c(a){a.forEach(function(a){b(a)}),$("#"+d).show({effect:"fade",duration:400})}$shoutOutDiv=$(".students"),$infoContainer=$(".infoContainer"),$all=$("body");var d=1,e=[],f=[];$h1=$("#head"),$.when(a()).done(function(){$("#loading").remove(),c(e);var a=$("<button>").attr({"class":"nextBut",id:"Next"}).text("Next").append($("<span>").attr({"class":"glyphicon glyphicon-chevron-right"})),b=$("<button>").attr({"class":"prevBut",id:"Prev"}).text("Prev").prepend($("<span>").attr({"class":"glyphicon glyphicon-chevron-left"})),g=$("<button>").attr({"class":"randBut",id:"Rand"}).text("Random");$infoContainer.append(b).append(g).append(a),$infoContainer.on("click","#Next",function(){$("#"+d).hide({effect:"fade"}),d++,d==e.length-1&&(d=1),$("#"+d).delay(400).show({effect:"fade",duration:400})}),$infoContainer.on("click","#Prev",function(){$("#"+d).hide({effect:"fade"}),d--,0==d&&(d=e.length),$("#"+d).delay(400).show({effect:"fade",duration:400})}),$infoContainer.on("click","#Rand",function(){var a=Math.floor(Math.random()*(e.length-1)+1);$("#"+d).hide({effect:"fade"}),d=a,$("#"+d).delay(400).show({effect:"fade",duration:400})}),$("#Add").on("click",function(){$shoutOutDiv.html("<p>Loading Info...</p>"),$.ajax({type:"GET",url:"/views/add.html"}).done(function(a){$shoutOutDiv.html(a)})}),$infoContainer.on("click","#insertShout",function(){$name=$("#Name"),$shoutAdd=$("#ShoutOut"),$name.val()&&$shoutAdd.val()&&(f.push({name:$name.val(),shoutout:$shoutAdd.val(),id:e.length+1}),d=e.length+1),$shoutOutDiv.empty(),c(e),c(f),"AddData"!=$("#AddData").attr("id")&&($("#Add").after('<button id="AddData" class="addData" name="AddData">Add Permanently</button>'),$("#AddData").after('<button id="CancelAdd" name="CancelAdd">Cancel</button>'),$("#Add").hide()),$("#"+d).show({effect:"fade",duration:400})}),$all.on("click","#CancelInsert",function(){$shoutOutDiv.empty(),c(e),c(f)}),$all.on("click","#CancelAdd",function(){d=1,$("#AddData").remove(),$("#CancelAdd").remove(),$("#Add").show(),f=[],$shoutOutDiv.empty(),c(e)}),$all.on("click","#AddData",function(){$shoutOutDiv.html("Updating.."),sendShouts={},f.forEach(function(a,b){sendShouts[b]=a}),$.ajax({method:"PUT",url:"/shoutouts",data:sendShouts}).done(function(a){d=1,e=a,$shoutOutDiv.empty(),c(a),$("#AddData").remove(),$("#CancelAdd").remove(),$("#Add").show(),f=[]}).fail(function(){console.log("Failed!")})})})});